<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>User Profile</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .btn-back,
      .btn-cartback,
      .btn-logout {
        background: linear-gradient(90deg, #29ffc6, #b388ff);
        color: black;
        border: none;
        padding: 10px;
        border-radius: 12px;
        font-weight: bold;
      }
      .btn-logout {
        background: linear-gradient(90deg, #ff4b2b, #ff416c);
      }
      .btn-back:hover,
      .btn-cartback:hover,
      .btn-logout:hover {
        color: black;
        cursor: pointer;
      }
    </style>
  </head>
  <body style="background-color: #1e1633; color: #b388ff">
    <div class="container py-5">
      <div
        class="card mx-auto shadow p-4"
        style="max-width: 500px; background-color: #2a2342; color: #b388ff"
      >
        <div class="text-center">
          <img
            src="./img/user.png"
            class="rounded-circle border mb-3"
            style="width: 100px; height: 100px"
            alt="user"
          />
          <h3 id="userName" class="fw-bold"></h3>
          <p id="userEmail"></p>
          <hr />
          <p><b>Contact:</b> <span id="userContact"></span></p>
          <p><b>Address:</b> <span id="userAddress"></span></p>
          <p><b>Login Time:</b> <span id="loginTime"></span></p>
          <p><b>ðŸ›’ Items in Cart:</b> <span id="cartCount"></span></p>
          <p><b>ðŸ’¸ Items Bought:</b> <span id="soldCount"></span></p>
          <button class="btn btn-logout" onclick="logoutUser()">Logout</button>
          <button class="btn btn-back" onclick="back()">
            Back to Products
          </button>
          <button class="btn btn-cartback" onclick="backcart()">My Cart</button>
        </div>
      </div>
    </div>

    <script>
      let user = JSON.parse(localStorage.getItem("loginData"));
      if (user) {
        document.getElementById("userName").innerText = user.username;
        document.getElementById("userEmail").innerText = user.email;
        document.getElementById("userContact").innerText = user.contact;
        document.getElementById("userAddress").innerText = user.address;
        document.getElementById("loginTime").innerText = user.loginTime;
      } else {
        window.location.href = "./product.html";
      }

      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      let sold = JSON.parse(localStorage.getItem("soldItems")) || [];

      document.getElementById("cartCount").innerText = cart.length;
      document.getElementById("soldCount").innerText = sold.length;

      function logoutUser() {
        localStorage.removeItem("loginData");
        alert("You have been logged out!");
        window.location.href = "./index.html";
      }

      function back() {
        window.location.href = "./index.html";
      }
      function backcart() {
        window.location.href = "./cart.html";
      }
    </script>
  </body>
</html>
